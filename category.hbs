{{!< default}}

{{> "components/search-form"}}

{{!-- ヘッダーセクション: 親タグページまたは子タグページ --}}
<div id="cat_header">
    {{> "components/breadcrumb"}}

    {{#tag}}
        {{!-- 親タグページ（slug そのまま）または子タグページ（親カテゴリー-slug）のpageを探す --}}
        {{#get "pages" filter="slug:{{slug}},slug:women-magazine-{{slug}},slug:women-manga-{{slug}},slug:child-magazine-{{slug}},slug:mother-magazine-{{slug}},slug:wedding-magazine-{{slug}},slug:men-magazine-{{slug}},slug:outdoor-magazine-{{slug}},slug:other-magazine-{{slug}},slug:entertainment-{{slug}},slug:brandmook-{{slug}}" limit="1" as |page_result|}}
            {{#if page_result}}
                {{!-- ページが見つかった場合 --}}
                {{#foreach page_result}}
                    {{> "category-header"}}
                {{/foreach}}
            {{else}}
                {{!-- ページが見つからない場合、タグ自体の情報を使用 --}}
                {{#if ../feature_image}}
                <div class="cat-headerWrap" style="background: url('{{../feature_image}}');">
                    <div class="bkRGBA">
                        <img src="{{asset "images/site-logo-white.png"}}" alt="{{@site.title}}">
                    </div>
                </div>
                {{/if}}

                <h1 style="margin-bottom: 20px;">{{../name}}</h1>
                {{#if ../description}}
                <div class="taxonomy-description entry-content" style="margin-bottom: 20px;">
                    <p>{{../description}}</p>
                </div>
                {{/if}}
            {{/if}}
        {{/get}}
    {{/tag}}
</div>

<div class="gh-content-wrapper">
    <main class="gh-main-content">
        {{!-- タイトルセクション --}}
        {{#tag}}
            <h2>{{name}}（発売日順）</h2>
        {{/tag}}

        {{!-- 投稿セクション: routes.yamlのfilterから直接postsを利用 --}}
        <div class="post-grid category-post-list">
            {{#foreach posts}}
                {{> "post-card"}}
            {{/foreach}}
        </div>

        {{> "pagination"}}
    </main>

    {{> "sidebar"}}
</div>
