{{!< default}}

{{> "components/search-form"}}

{{!-- ヘッダーセクション: 親タグページまたは子タグページ --}}
<div id="cat_header">
    {{> "components/breadcrumb"}}

    {{#tag}}
        {{!-- 親タグページ（category-slug）または子タグページ（category-親-slug）のpageを探す --}}
        {{#get "pages" filter="slug:category-{{slug}},slug:category-women-magazine-{{slug}},slug:category-women-manga-{{slug}},slug:category-child-magazine-{{slug}},slug:category-mother-magazine-{{slug}},slug:category-wedding-magazine-{{slug}},slug:category-men-magazine-{{slug}},slug:category-outdoor-magazine-{{slug}},slug:category-other-magazine-{{slug}},slug:category-entertainment-{{slug}},slug:category-brandmook-{{slug}}" limit="1" as |page_result|}}
            {{#if page_result}}
                {{!-- ページが見つかった場合 --}}
                {{#foreach page_result}}
                    {{> "category-header"}}
                {{/foreach}}
            {{else}}
                {{!-- ページが見つからない場合、タグ自体の情報を使用 --}}
                <h1 style="margin-bottom: 20px;">{{../name}}</h1>
                {{#if ../description}}
                <div class="taxonomy-description entry-content" style="margin-bottom: 20px;">
                    <p>{{../description}}</p>
                </div>
                {{/if}}
            {{/if}}
        {{/get}}
    {{/tag}}
</div>

<div class="gh-content-wrapper">
    <main class="gh-main-content">
        {{!-- タイトルセクション --}}
        {{#tag}}
            <h2>{{name}}（発売日順）</h2>
        {{/tag}}

        {{!-- 投稿セクション: routes.yamlのfilterから直接postsを利用 --}}
        <div class="post-grid category-post-list">
            {{#foreach posts}}
                {{> "post-card"}}
            {{/foreach}}
        </div>

        {{> "pagination"}}
    </main>

    {{> "sidebar"}}
</div>
